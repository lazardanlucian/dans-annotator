<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dan's Annotator Donate Panel</title>
    <link rel="stylesheet" href="donate-panel.css">
</head>
<body>
    <div class="annotate-donate-inner">
        <div class="annotate-donate-header">
            <div>
                <div class="annotate-eyebrow">Fuel the roadmap</div>
                <h2>Donate to Dan's Annotator</h2>
                <p class="annotate-lead">Help Dan maintain this and other plugins. He wants to become a better programmer by building free plugins.</p>
            </div>
            <span class="annotate-chip">Thank you</span>
        </div>
        <div class="annotate-donate-methods">
            <div class="annotate-donate-body">
                <div class="annotate-donate-qr" title="Donate via QR">
                    <img src="donate.jpg" alt="Scan to donate with Ethereum" loading="lazy">
                </div>
                <div class="annotate-donate-address" data-address="0xaf2c6Bfd1fF0434443854E566E88913Ea1C4e8e1">
                    <span class="annotate-donate-label">Ethereum address</span>
                    <a href="ethereum:0xaf2c6Bfd1fF0434443854E566E88913Ea1C4e8e1?value=0.2" class="annotate-donate-link">0xaf2c6Bfd1fF0434443854E566E88913Ea1C4e8e1</a>
                </div>
            </div>
            <div class="annotate-donate-body">
                <div class="annotate-donate-qr" title="Donate via QR">
                    <img src="donate-bitcoin.jpg" alt="Scan to donate with Bitcoin" loading="lazy">
                </div>
                <div class="annotate-donate-address" data-address="bc1qdn3cu2gx9cpvgr57m37cq4zwt4dfgvrvasl806">
                    <span class="annotate-donate-label">Bitcoin address</span>
                    <a href="bitcoin:bc1qdn3cu2gx9cpvgr57m37cq4zwt4dfgvrvasl806" class="annotate-donate-link">bc1qdn3cu2gx9cpvgr57m37cq4zwt4dfgvrvasl806</a>
                </div>
            </div>
        </div>
        <p class="annotate-help">Send any amount you like â€” every tip directly funds maintenance and features.</p>
    </div>
    <script>
    (function(){
        function findContainer(link){
            if(!link) return null;
            if(typeof link.closest === 'function'){
                return link.closest('.annotate-donate-address');
            }
            var node = link.parentElement;
            while(node && node !== document){
                if(node.classList && node.classList.contains('annotate-donate-address')){
                    return node;
                }
                node = node.parentElement;
            }
            return null;
        }

        function handleCopy(e){
            var link = e && e.currentTarget ? e.currentTarget : e.target;
            var container = findContainer(link);
            if(!container || !link) return;
            var address = container.getAttribute('data-address') || link.textContent || '';
            var href = link.getAttribute('href');
            if(!address || !href) return;
            if(!navigator.clipboard || !navigator.clipboard.writeText) return;
            var openInNewTab = e && (e.metaKey || e.ctrlKey || e.button === 1);
            e.preventDefault();
            navigator.clipboard.writeText(address).then(function(){
                link.classList.add('is-copied');
                setTimeout(function(){ link.classList.remove('is-copied'); }, 1000);
                setTimeout(function(){
                    if(openInNewTab){
                        window.open(href, '_blank');
                    }else{
                        window.location.href = href;
                    }
                }, 150);
            }).catch(function(){
                if(openInNewTab){
                    window.open(href, '_blank');
                }else{
                    window.location.href = href;
                }
            });
        }

        var links = document.querySelectorAll('.annotate-donate-link');
        if(links && links.length){
            for(var i=0;i<links.length;i++){
                links[i].addEventListener('click', handleCopy);
            }
        }
    })();
    </script>
</body>
</html>
